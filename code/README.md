AWS Lambda Crypto Notifier Setup GuideThis guide will walk you through setting up the AWS Lambda function to monitor cryptocurrency prices and send notifications.PrerequisitesAn AWS account with access to Lambda, SNS, IAM, and Systems Manager Parameter Store.Python 3.8 or later installed on your local machine.The AWS CLI installed and configured.Step 1: Create an SNS TopicThis SNS topic will be used to send the price alert notifications.Go to the Amazon SNS console.In the left navigation pane, choose Topics.Choose Create topic.For Type, choose Standard.For Name, enter a name for your topic (e.g., CryptoPriceAlerts).Choose Create topic.Once the topic is created, you need to create a subscription. This is how you will receive the notifications (e.g., via email or SMS).On the topic's page, choose Create subscription.For Protocol, choose Email (or your preferred method).For Endpoint, enter your email address.Choose Create subscription.You will receive a confirmation email. Click the link in the email to confirm your subscription.Copy the ARN of the SNS topic. You will need it later.Step 2: Create an IAM Role for the Lambda FunctionThe Lambda function needs permissions to interact with other AWS services.Go to the IAM console.In the left navigation pane, choose Roles.Choose Create role.For Trusted entity type, select AWS service.For Use case, select Lambda.Choose Next.On the Add permissions page, search for and add the following policies:AWSLambdaBasicExecutionRole (for logging to CloudWatch)AmazonSNSFullAccess (to publish to the SNS topic)AmazonSSMFullAccess (to read and write to Parameter Store)SecretsManagerReadWrite (if you are storing API keys in Secrets Manager)Choose Next.For Role name, enter a name (e.g., CryptoNotifierLambdaRole).Choose Create role.Step 3: Create the Lambda FunctionGo to the AWS Lambda console.Choose Create function.Select Author from scratch.For Function name, enter a name (e.g., CryptoPriceMonitor).For Runtime, select Python 3.9.For Architecture, select x86_64.Under Permissions, expand Change default execution role.Select Use an existing role.From the Existing role dropdown, select the IAM role you created in the previous step (CryptoNotifierLambdaRole).Choose Create function.Step 4: Configure the Lambda FunctionIn the Code source section, paste the Python code from the crypto_notifier_lambda.py file.Create the requirements.txt file:You will need to package the required Python libraries. Create a requirements.txt file with the content from the requirements.txt immersive document.Install the libraries into a directory: pip install -r requirements.txt -t .Create a ZIP file containing the Python script and the installed libraries.Upload this ZIP file to the Lambda function.Set Environment Variables:Go to the Configuration tab and then Environment variables.Choose Edit.Add a new environment variable:Key: SNS_TOPIC_ARNValue: Paste the ARN of the SNS topic you created in Step 1.Set up a Trigger:Go to the Configuration tab and then Triggers.Choose Add trigger.Select EventBridge (CloudWatch Events).Choose Create a new rule.For Rule name, enter a name (e.g., CryptoMonitorSchedule).For Schedule expression, you can set how often you want the function to run. For example, to run every hour, use rate(1 hour).Choose Add.Step 5: (Optional) Store Binance API Keys in Secrets ManagerThe provided code uses a public Binance endpoint that doesn't require API keys. However, if you extend the functionality to use private endpoints (e.g., for account-specific data), you should store your API keys securely.Go to the AWS Secrets Manager console.Choose Store a new secret.For Secret type, select Other type of secret.In the Key/value pairs, enter your Binance API key and secret key:Key: BINANCE_API_KEY, Value: Your Binance API KeyKey: BINANCE_SECRET_KEY, Value: Your Binance Secret KeyChoose Next.For Secret name, enter BinanceApiKeys.Choose Next and then Store.Step 6: Test the FunctionIn the Lambda console, go to the Test tab.Choose Configure test event.For Event name, enter a name (e.g., TestEvent).Leave the event JSON as the default {}.Choose Save and then Test.Check the Execution results and the Logs in CloudWatch to see the output. You should also receive an email notification if a price change threshold was met.
